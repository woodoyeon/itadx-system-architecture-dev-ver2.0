-- ItaDX MVP 초기 데이터 시드
-- 실행: docker exec -i itadx-postgres psql -U itadx -d itadx_mvp < scripts/seed.sql

-- 비밀번호: 'password123' (bcrypt hash, bcryptjs 2.4.3 호환)
-- $2a$10$WVucSzUavzPwgbVlAaf9XehN2XaocxhzhSzefCQdic9booHFsW.Wy

-- 마트 3개
INSERT INTO marts (id, name, business_number, representative, address, status) VALUES
  ('a0000000-0000-0000-0000-000000000001', '이타마트 본점', '123-45-67890', '김대표', '서울시 강남구 테헤란로 123', 'active'),
  ('a0000000-0000-0000-0000-000000000002', '이타마트 강북점', '234-56-78901', '이대표', '서울시 성북구 동소문로 45', 'active'),
  ('a0000000-0000-0000-0000-000000000003', '이타마트 인천점', '345-67-89012', '박대표', '인천시 남동구 논현로 67', 'active');

-- 지점 6개
INSERT INTO branches (mart_id, name, code, risk_index) VALUES
  ('a0000000-0000-0000-0000-000000000001', '본점 1지점', 'HQ-001', 35.5),
  ('a0000000-0000-0000-0000-000000000001', '본점 2지점', 'HQ-002', 42.0),
  ('a0000000-0000-0000-0000-000000000002', '강북 1지점', 'GB-001', 28.0),
  ('a0000000-0000-0000-0000-000000000002', '강북 2지점', 'GB-002', 55.0),
  ('a0000000-0000-0000-0000-000000000003', '인천 1지점', 'IC-001', 30.0),
  ('a0000000-0000-0000-0000-000000000003', '인천 2지점', 'IC-002', 65.0);

-- 가맹점 9개
INSERT INTO merchants (id, mart_id, name, business_number, category, score, grade) VALUES
  ('b0000000-0000-0000-0000-000000000001', 'a0000000-0000-0000-0000-000000000001', '행복한베이커리', '111-11-11111', '제과', 820, 'A'),
  ('b0000000-0000-0000-0000-000000000002', 'a0000000-0000-0000-0000-000000000001', '신선수산', '111-11-22222', '수산', 650, 'B'),
  ('b0000000-0000-0000-0000-000000000003', 'a0000000-0000-0000-0000-000000000001', '청과물직거래', '111-11-33333', '청과', 420, 'C'),
  ('b0000000-0000-0000-0000-000000000004', 'a0000000-0000-0000-0000-000000000002', '강북정육점', '222-22-11111', '정육', 710, 'B'),
  ('b0000000-0000-0000-0000-000000000005', 'a0000000-0000-0000-0000-000000000002', '동북아식품', '222-22-22222', '가공식품', 550, 'C'),
  ('b0000000-0000-0000-0000-000000000006', 'a0000000-0000-0000-0000-000000000002', '대한유통', '222-22-33333', '유통', 380, 'D'),
  ('b0000000-0000-0000-0000-000000000007', 'a0000000-0000-0000-0000-000000000003', '인천해산물', '333-33-11111', '수산', 690, 'B'),
  ('b0000000-0000-0000-0000-000000000008', 'a0000000-0000-0000-0000-000000000003', '서해농산', '333-33-22222', '농산', 530, 'C'),
  ('b0000000-0000-0000-0000-000000000009', 'a0000000-0000-0000-0000-000000000003', '인천축산', '333-33-33333', '축산', 770, 'B');

-- 사용자 6명
-- 비밀번호: password123 → $2a$10$WVucSzUavzPwgbVlAaf9XehN2XaocxhzhSzefCQdic9booHFsW.Wy (bcryptjs 호환)
INSERT INTO users (email, password_hash, name, role, mart_id) VALUES
  ('bank@itadx.com', '$2a$10$WVucSzUavzPwgbVlAaf9XehN2XaocxhzhSzefCQdic9booHFsW.Wy', '은행담당자', 'bank', NULL),
  ('mart1@itadx.com', '$2a$10$WVucSzUavzPwgbVlAaf9XehN2XaocxhzhSzefCQdic9booHFsW.Wy', '본점매니저', 'mart', 'a0000000-0000-0000-0000-000000000001'),
  ('mart2@itadx.com', '$2a$10$WVucSzUavzPwgbVlAaf9XehN2XaocxhzhSzefCQdic9booHFsW.Wy', '강북매니저', 'mart', 'a0000000-0000-0000-0000-000000000002'),
  ('admin@itadx.com', '$2a$10$WVucSzUavzPwgbVlAaf9XehN2XaocxhzhSzefCQdic9booHFsW.Wy', '시스템관리자', 'admin', NULL),
  ('bank2@itadx.com', '$2a$10$WVucSzUavzPwgbVlAaf9XehN2XaocxhzhSzefCQdic9booHFsW.Wy', '은행심사역', 'bank', NULL),
  ('test@test.com', '$2a$10$WVucSzUavzPwgbVlAaf9XehN2XaocxhzhSzefCQdic9booHFsW.Wy', '테스트계정', 'admin', NULL);

-- 입고 12건 (pending 6, confirmed 6)
INSERT INTO receivings (merchant_id, mart_id, receiving_date, total_amount, items, status, confirmed_at) VALUES
  ('b0000000-0000-0000-0000-000000000001', 'a0000000-0000-0000-0000-000000000001', '2026-02-20', 1500000, '[{"name":"식빵","qty":100,"price":15000}]', 'confirmed', '2026-02-20 14:00:00+09'),
  ('b0000000-0000-0000-0000-000000000002', 'a0000000-0000-0000-0000-000000000001', '2026-02-21', 3200000, '[{"name":"고등어","qty":200,"price":16000}]', 'confirmed', '2026-02-21 10:00:00+09'),
  ('b0000000-0000-0000-0000-000000000003', 'a0000000-0000-0000-0000-000000000001', '2026-02-22', 800000, '[{"name":"사과","qty":400,"price":2000}]', 'pending', NULL),
  ('b0000000-0000-0000-0000-000000000004', 'a0000000-0000-0000-0000-000000000002', '2026-02-22', 2100000, '[{"name":"한우등심","qty":30,"price":70000}]', 'confirmed', '2026-02-22 11:00:00+09'),
  ('b0000000-0000-0000-0000-000000000005', 'a0000000-0000-0000-0000-000000000002', '2026-02-23', 950000, '[{"name":"라면","qty":500,"price":1900}]', 'pending', NULL),
  ('b0000000-0000-0000-0000-000000000006', 'a0000000-0000-0000-0000-000000000002', '2026-02-23', 1800000, '[{"name":"음료수","qty":600,"price":3000}]', 'pending', NULL),
  ('b0000000-0000-0000-0000-000000000007', 'a0000000-0000-0000-0000-000000000003', '2026-02-24', 2700000, '[{"name":"새우","qty":150,"price":18000}]', 'confirmed', '2026-02-24 09:00:00+09'),
  ('b0000000-0000-0000-0000-000000000008', 'a0000000-0000-0000-0000-000000000003', '2026-02-24', 600000, '[{"name":"배추","qty":300,"price":2000}]', 'confirmed', '2026-02-24 15:00:00+09'),
  ('b0000000-0000-0000-0000-000000000009', 'a0000000-0000-0000-0000-000000000003', '2026-02-25', 4100000, '[{"name":"돼지삼겹","qty":100,"price":41000}]', 'confirmed', '2026-02-25 11:00:00+09'),
  ('b0000000-0000-0000-0000-000000000001', 'a0000000-0000-0000-0000-000000000001', '2026-02-25', 1200000, '[{"name":"케이크","qty":60,"price":20000}]', 'pending', NULL),
  ('b0000000-0000-0000-0000-000000000004', 'a0000000-0000-0000-0000-000000000002', '2026-02-26', 3500000, '[{"name":"소갈비","qty":50,"price":70000}]', 'pending', NULL),
  ('b0000000-0000-0000-0000-000000000007', 'a0000000-0000-0000-0000-000000000003', '2026-02-26', 1900000, '[{"name":"랍스터","qty":20,"price":95000}]', 'pending', NULL);

-- 정산 6건
INSERT INTO settlements (merchant_id, mart_id, period, amount, status) VALUES
  ('b0000000-0000-0000-0000-000000000001', 'a0000000-0000-0000-0000-000000000001', '2026-01', 4500000, 'completed'),
  ('b0000000-0000-0000-0000-000000000002', 'a0000000-0000-0000-0000-000000000001', '2026-01', 8200000, 'completed'),
  ('b0000000-0000-0000-0000-000000000004', 'a0000000-0000-0000-0000-000000000002', '2026-01', 5100000, 'pending'),
  ('b0000000-0000-0000-0000-000000000005', 'a0000000-0000-0000-0000-000000000002', '2026-01', 2800000, 'overdue'),
  ('b0000000-0000-0000-0000-000000000007', 'a0000000-0000-0000-0000-000000000003', '2026-01', 6300000, 'completed'),
  ('b0000000-0000-0000-0000-000000000009', 'a0000000-0000-0000-0000-000000000003', '2026-01', 9200000, 'pending');
